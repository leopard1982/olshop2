{% extends "base.html" %}
{% load static %}
{% block contents%}

<div style="background-color:whitesmoke;border-radius:5px;margin-top:20px;margin-left:-20px;" >
    <div class="box-sering-dicari-header d-flex align-items-center">
        <img src="{% static 'img/DILIHAT.png'%}" class="w-100 rounded"/>
        <div class='position-absolute'>
            <div class="panah-kanan-jalan-uhui rounded-circle px-2  text-white fw-bold d-flex justify-content-center align-items-center bg-secondary h1" style="padding-bottom:5px;margin-left:170px">&rarr;</div>
            
        </div>
    </div>
    <div class="position-absolute d-flex justify-content-evenly" style="margin-left:230px" id="box_sering_dicari_5">
        
    </div>
</div>

<div style=" container-fluid background-color:whitesmoke;border-radius:5px;margin-top:20px;;margin-bottom:170px" >
    <div class="p-2 box-bawah" style="width:1120px">
        <div class=" rounded text-start  fw-bold d-flex justify-content-between" style="background-color:rgba(0,0,0,0.6)">
            <span class="text-start fw-bold" style="margin-bottom:10px;margin-left:10px;font-size:20px">BEST DEAL BUDGET PRODUCT!</span>
            
        </div>
        <div class="row d-flex px-3 py-1" style="width:1120px;border-bottom:1px solid grey;margin-left:-7px">
            <div class="col-1 p-2" style="font-size:12px">Merk:</div> 
            <div class="col-2" >
                <select class="form-select border border-danger" id="filter_merek_budget" onchange="set_merek('budget')"  style="font-size:12px">
                    <option value="">-----</option>
                    {% for merek in mereknya %}
                    <option value="{{merek.merek_nama}}" style="width:20px;height:20px">{{merek.merek_nama}}</option>
                    {% endfor%}
                </select>
            </div>
            <div class="col-1 p-2" style="font-size:12px">Kategori:</div> 
            <div class="col-2" >
                <select class="form-select border border-danger" id="filter_kategori_budget" onchange="set_kategori_new('budget')"  style="font-size:12px">
                    <option value="">------</option>
                    {% for kategori in kategorinya %}
                    <option value="{{kategori.barang_kategori}}">{{kategori.barang_kategori}}</option>
                    {% endfor%}
                </select>
            </div>
            <div class="col-2 p-2" style="font-size:12px">Urutkan Harga:</div> 
            <div class="col-2" >
                <select class="form-select border border-danger" id="filter_harga_budget" onchange="set_harga('budget')"  style="font-size:12px">
                    <option value="">------</option>
                    <option value="murah">Ter-MURAH</option>
                    <option value="diskon">Ter-DISKON</option>
                    <option value="premium">Ter-PREMIUM</option>
                </select>
            </div>
            <div class="col-2">
                <button class="btn btn-outline-secondary form-control rounded-pill" onclick="tampilkan_barang_budget()" style="font-size:12px">Terapkan Filter</button>
            </div>
        </div>
    </div>
    <div class="d-flex justify-content-between">
        <div class=" panah-kiri">&lt;</div>
        <div class="position-absolute d-flex justify-content-evenly" style="margin-top:300px" id="box_sering_dicari_5">
            <div class="box-sering-dicari">test</div>
            <div class="box-sering-dicari">test</div>
            <div class="box-sering-dicari">test</div>
            <div class="box-sering-dicari">test</div>
            <div class="box-sering-dicari">test</div>
            <div class="box-sering-dicari">test</div>  
        </div>
        <div class=" panah-kanan ">&gt;</div>
    </div>
</div>

<div style=" container-fluid background-color:whitesmoke;border-radius:5px;margin-top:20px;;margin-bottom:170px" >
    <div class="p-2 box-bawah" style="width:1120px">
        <div class=" rounded text-start  fw-bold d-flex justify-content-between" style="background-color:rgba(255,255,0,1)">
            <span class="text-start fw-bold" style="margin-bottom:10px;margin-left:10px;font-size:20px">GREAT PREMIUM PRODUCT!</span>
            
        </div>
        <div class="row d-flex px-3 py-1" style="width:1120px;border-bottom:1px solid grey;margin-left:-7px">
            <div class="col-1 p-2" style="font-size:12px">Merk:</div> 
            <div class="col-2" >
                <select class="form-select border border-danger" id="filter_merek_premium" onchange="set_merek('premium')" style="font-size:12px">
                    <option value="">-----</option>
                    {% for merek in mereknya %}
                    <option value="{{merek.merek_nama}}">{{merek.merek_nama}}</option>
                    {% endfor%}
                </select>
            </div>
            <div class="col-1 p-2" style="font-size:12px">Kategori:</div> 
            <div class="col-2" >
                <select class="form-select  border border-danger" id="filter_kategori_premium" onchange="set_kategori_new('premium')" style="font-size:12px">
                    <option value="">------</option>
                    {% for kategori in kategorinya %}
                    <option value="{{kategori.barang_kategori}}">{{kategori.barang_kategori}}</option>
                    {% endfor%}
                </select>
            </div>
            <div class="col-2 p-2" style="font-size:12px">Urutkan Harga:</div> 
            <div class="col-2" >
                <select class="form-select border border-danger" id="filter_harga_premium" onchange="set_harga('premium')" style="font-size:12px">
                    <option value="">------</option>
                    <option value="murah">Ter-MURAH</option>
                    <option value="diskon">Ter-DISKON</option>
                    <option value="premium">Ter-PREMIUM</option>
                </select>
            </div>
            <div class="col-2">
                <button class="btn btn-outline-secondary form-control rounded-pill" style="font-size:12px">Terapkan Filter</button>
            </div>
        </div>
    </div>
    <div class="d-flex justify-content-between">
        <div class=" panah-kiri">&lt;</div>
        <div class="position-absolute d-flex justify-content-evenly" style="margin-top:300px" id="box_sering_dicari_5">
            <div class="box-sering-dicari">test</div>
            <div class="box-sering-dicari">test</div>
            <div class="box-sering-dicari">test</div>
            <div class="box-sering-dicari">test</div>
            <div class="box-sering-dicari">test</div>
            <div class="box-sering-dicari">test</div>  
        </div>
        <div class=" panah-kanan ">&gt;</div>
    </div>
</div>

<div style=" container-fluid background-color:whitesmoke;border-radius:5px;margin-top:20px;margin-bottom:170px" >
    <div class="p-2 box-bawah" style="width:1120px;">
        <div class=" rounded text-start  fw-bold d-flex justify-content-between" style="background-color:rgba(0,255,0,0.8)">
            <span class="text-start fw-bold" style="margin-bottom:10px;margin-left:10px;font-size:20px">GAJIAN SALE!</span>
            
        </div>
        <div class="row d-flex px-3 py-1" style="width:1120px;border-bottom:1px solid grey;margin-left:-7px">
            <div class="col-1 p-2" style="font-size:12px">Merk:</div> 
            <div class="col-2" >
                <select class="form-select border border-danger"  id="filter_merek_diskon" onchange="set_merek('diskon')" style="font-size:12px">
                    <option value="">-----</option>
                    {% for merek in mereknya %}
                    <option value="{{merek.merek_nama}}">{{merek.merek_nama}}</option>
                    {% endfor%}
                </select>
            </div>
            <div class="col-1 p-2" style="font-size:12px">Kategori:</div> 
            <div class="col-2" >
                <select class="form-select border border-danger"  id="filter_kategori_diskon" onchange="set_kategori_new('diskon')" style="font-size:12px">
                    <option value="">------</option>
                    {% for kategori in kategorinya %}
                    <option value="{{kategori.barang_kategori}}">{{kategori.barang_kategori}}</option>
                    {% endfor%}
                </select>
            </div>
            
            <div class="col-2">
                <button class="btn btn-outline-secondary form-control rounded-pill" style="font-size:12px">Terapkan Filter</button>
            </div>
        </div>
    </div>
    <div class="d-flex justify-content-between">
        <div class=" panah-kiri">&lt;</div>
        <div class="position-absolute d-flex justify-content-evenly" style="margin-top:300px" id="box_sering_dicari_5">
            <div class="box-sering-dicari">Test</div>
            <div class="box-sering-dicari">test</div>
            <div class="box-sering-dicari">test</div>
            <div class="box-sering-dicari">test</div>
            <div class="box-sering-dicari">test</div>
            <div class="box-sering-dicari">test</div>
        </div>
        <div class=" panah-kanan ">&gt;</div>
    </div>
    
</div>

<script>
    function ubahKeUang(data) {
        let x = data.toString();
        let lebar = x.length-1;
        let counter=1;
        let lebar2 = lebar;
        let uangku = "";
        while(lebar>-1) {
            uangku = x[lebar] + uangku;
            if(counter==3 && lebar!=0) {
                uangku = "." + uangku;
                counter=1;
            } else {
                counter++;
            }
            lebar-=1;
        }
        return "Rp. " + uangku + ",00";
    }
    $(document).ready(function() {
        isi_seringdicari();
    });

    function test() {
        alert("hohoho");
    }

    function new_produk() {
        freq_search();
        /* tampilkan hasil*/
        
        if($("#keyword").text().trim().length>0) {
            $("#hasil_pencarian").empty();
            $.ajax({
                type: "POST",
                url: '/api/get/search/',
                data : {
                    'csrfmiddlewaretoken':csrfmiddlewaretokennya,
                    'keyword':  $("#keyword").text(),
                    'kategori': kategori
                },
                success : function (data) {
                    data.result.forEach(function (mydata){
                        tampilan = "<div id='cari_" + mydata.barang_sku +"' class='search-box-hasil d-flex justify-content-start align-items-center'>" +
                            "<img src='" + mydata.barang_foto1+"' style='margin-right:10px;width:50px;height:50px;border-radius:25px;margin-bottom:5px'>" +
                            "<div style='font-size:12px;font-weight:bold;'>" + mydata.barang_nama.toUpperCase() +"</div></div>";
                        $("#hasil_pencarian").append(tampilan);
                        $("#cari_" + mydata.barang_sku).click(function() {
                            $.ajax({
                                type: "POST",
                                url: '/api/get/search/hasil/',
                                data: {
                                    'csrfmiddlewaretoken':csrfmiddlewaretokennya,
                                    'kode_sku':  mydata.barang_sku
                                },
                                success: function(data) {
                                    console.log("pencarian di klik " + data);
                                    isi_seringdicari();
                                }
                            });
                        });
                    });


                }
            });
        }
    }

    function set_harga(data) {
        console.log("harga " + data);
        if(data=="budget") {
            harga_budget=$("#filter_harga_budget").val();
        } else if(data=="premium") {
            harga_premium=$("#filter_harga_premium").val();
        }
    }

    function set_kategori_new(data) {
        console.log("kategori " + data);
        if(data=="budget") {
            kategori_budget = $("#filter_kategori_budget").val();
        } else if(data=="premium") {
            kategori_premium = $("#filter_kategori_premium").val();
        } else if(data=="diskon") {
            kategori_diskon = $("#filter_kategori_diskon").val();
        }
    }

    function set_merek(data) {
        console.log("merek " + data);
        if(data=="budget") {
            merek_budget = $("#filter_merek_budget").val();
        } else if(data=="premium") {
            merek_premium = $("#filter_merek_premium").val();
        } else if(data=="diskon") {
            merek_diskon = $("#filter_merek_diskon").val();
        }
    }

    function tampilkan_barang_budget() {
        $.ajax({
            type: "POST",
            url: '/api/get/barang/budget/',
            data : {
                'csrfmiddlewaretoken':csrfmiddlewaretokennya,
                'merek': merek_budget,
                'kategori':kategori_budget,
                'harga':harga_budget,
                'halaman':halaman_budget,
            },
            success: function(data) {
                console.log(data);
            }
        });
    }
            
</script>

{% endblock%}