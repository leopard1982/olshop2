{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <script src="{% static 'js/jquery.3.6.4.js'%}"></script>
    <script src="{% static 'js/bootstrap5.bundle.min.js'%}"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Shop #2</title>
    <link rel="stylesheet" href="{% static 'css/margin.css'%}">
    <link rel="stylesheet" href="{% static 'css/bootstrap5.min.css'%}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body onscroll="cek_scroll()">
    {% csrf_token %}

    <div class="modal" tabindex="-1" id="modalkategori">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-body">
                <div class="text-center h3">KATEGORI</div>
                <div class=" box-bingkai-kategori" id="the_kategori">

                </div>
            </div>
          </div>
        </div>
    </div>


    <div class="modal" tabindex="-1" id="modalpromo">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-body">
                <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-indicators">
                      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
                      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
                    </div>
                    <div class="carousel-inner">
                      <div class="carousel-item active">
                        <img src="{% static 'img/17-1.jpeg'%}" class="d-block w-100" alt="...">
                      </div>
                      <div class="carousel-item">
                        <img src="{% static 'img/17-2.jpeg'%}" class="d-block w-100" alt="...">
                      </div>
                      <div class="carousel-item">
                        <img src="{% static 'img/17-3.jpeg'%}" class="d-block w-100" alt="...">
                      </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Next</span>
                    </button>
                  </div>
            </div>
          </div>
        </div>
    </div>

    <div class="container-fluid fixed-top">
        <img src="{% static 'img/promo-header.jpeg' %}"  class="promo" style="width:70px;height:40px;margin-top:100px" alt="">  
    </div>
    <div class="container-fluid fixed-top">
        <img src="{% static 'img/17an.jpg' %}" class="promo2" onmouseover="remove_dnone()" onclick="show_promo()"  style="width:70px;height:130px;margin-top:150px" alt="">
    </div>
    <div class="container-fluid fixed-top d-none" id="mypromo">
        <img src="{% static 'img/jagoanhelm.png'%}" alt="">
    </div>
    <div class="container fixed-top bg-white" id="the_header"  style="height:150px;border:2px solid white">
        <div class="p-2 border-bottom border-danger m-2">
            <div class="row">
                <div class="col-6 col-sm-6 col-md-6 col-lg-4 col-xl-3 col-xxl-3 jagoan  d-flex align-items-center" title="jagoanhelm.com">
                    <div class="rounded-pill shadow"><img src="{% static 'img/jagoanhelm.png'%}" style="height:50px;weight:60px" alt=""></div>
                    <h3 class="text-danger fw-bold my-1 mx-2"> jagoanhelm.com</h3>
                </div>
                <div class="col-6 col-sm-6 col-md-6 col-lg-8 col-xl-9 col-xxl-9">
                    <div class="d-none d-sm-none d-md-none d-lg-flex d-xl-flex d-xxl-flex justify-content-evenly">
                        <div class="my-3">
                            <div class=" garis" onclick="modal_kategori_show()" ><i class="fa fa-filter mx-2"></i>Category</div>
                        </div>
                        <div class="my-3">
                            <div class="garis" onclick="show_shoppingcart()"><i class="fa fa-cart-arrow-down mx-2"></i>Shopping Cart</div>                        
                            <div class="shoppingcart-box" onmouseleave="hide_shoppingcart()">
                                <div><strong>ITEM Shopping Chart1</strong></div>
                                <div>{% lorem 1 %}</div>
                                <div><strong>ITEM Shopping Chart2</strong></div>
                                <div>{% lorem 1 %}</div>
                            </div>
                        </div>
                        <div class="my-3">
                            <div class="garis" onclick="show_wishlist()"><i class="fa fa-heartbeat mx-2"></i>Wishlist</div>
                            <div class="wishlist-box" onmouseleave="hide_wishlist()">
                                <div><strong>ITEM Wishlist1</strong></div>
                                <div>{% lorem 1 %}</div>
                                <div><strong>ITEM Wishlist2</strong></div>
                                <div>{% lorem 1 %}</div>
                            </div>
                        </div>
                        <div class="my-3">
                            <div class="garis" onclick="show_notification()"><i class="fa fa-bell-o mx-2"></i>Notification</div>
                            <div class="notification-box" onmouseleave="hide_notification()">
                                <div><strong>My Notification1</strong></div>
                                <div>{% lorem 1 %}</div>
                                <div><strong>My Notification2</strong></div>
                                <div>{% lorem 1 %}</div>
                            </div>
                        </div>
                        <div class="my-3">
                            <div class="garis" onclick="show_account()"><i class="fa fa-user-circle mx-2"></i>Account</div>
                            <div class="account-box" onmouseleave="hide_account()">
                                <div><strong>My Account Info1</strong></div>
                                <div>{% lorem 1 %}</div>
                                <div><strong>My Account Info2</strong></div>
                                <div>{% lorem 1 %}</div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex d-sm-flex d-md-flex d-lg-none d-xl-none d-xxl-none justify-content-end">
                        <button type="button" class="btn btn-default btn-lg">
                            <i class="fa fa-navicon my-1 text-danger fw-bold"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row px-2">
            <div class="col-12 col-sm-12 col-md-12 col-lg-8 col-xl-8 col-xxl-8">
                <div class="row ">
                    <div class="col-6">
                        <i class="fa fa-search search-icon"></i><input type="text" id="search" placeholder="search..." autocomplete="on" onkeyup="searchkeyword()" onmouseover="tampilsearch()" onchange="searchkeyword()" onfocusin="tampilsearch()">
                        <div class="search-box" onmouseleave="hide_search()">
                            <div>Pencarian: "<span id="keyword" class="fw-bold"></span>"
                                <div class="spinner-border text-secondary" style="width:10px;height:10px" role="status">
                                    <span class="visually-hidden" >Loading...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 d-flex justify-content-evenly" id="usual_search">
                    </div>
                </div>
            </div>
            <div class="col-4 d-none d-sm-none d-md-none d-lg-flex d-xl-flex d-xxl-flex">
                <div class="text-center w-100" id="info">jagoanhelm.com pusatnya helm!</div>
            </div>
        </div>
        <hr class="text-white">
    </div>
    <div class="container" onscroll="myFunction()" style="margin-bottom:50px;margin-top:150px;">
        {% block contents%}{% endblock%}
        {% lorem 20 %}{% lorem 20 %}{% lorem 20 %}
    </div>
    <div class="container" style="margin-bottom:50px">
        <div class="d-flex row justify-content-center">
            <div class="col-4 p-2" style="border-right:1px solid grey;">
                <strong>Our Store:</strong><br>
                Ruko Arcadia Blok BD No. 120<br>
                Jl. Pulo Sirih Utama, RT.004/RW.015<br>
                Jaka Setia, Bekasi Selatan, Kota Bekasi<br>
                Jawa Barat 17148<br><br>
                <iframe class="w-100" style="height:200px" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.0085656979195!2d106.97028017380322!3d-6.262600993725997!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e698db00b8eacf9%3A0x7ee3fad755f1e152!2sJagoan%20Helm!5e0!3m2!1sid!2sid!4v1693393950234!5m2!1sid!2sid" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
            <div class="col-8">
                <img src="{% static 'img/jagoanhelm.png'%}" class="w-25 promo" alt="">
            </div>
        </div>
    
    </div>
    <div class="fixed-bottom container-fluid">
        <div class="row">
            <div class="d-flex col-10 justify-content-end ">
            
            </div>
            <div class="py-3 col-2 my-3">
                <div class="text-white text-center fw-bold bg-success rounded-pill py-2 my-2 wa-admin" style="cursor:pointer">
                    <i class="fa fa-whatsapp mx-1 " aria-hidden="true"></i>Chat Admin#1
                </div>
                <div class="text-white text-center fw-bold bg-success rounded-pill py-2 my-2 wa-admin"  style="cursor:pointer">
                    <i class="fa fa-whatsapp mx-1 " aria-hidden="true"></i>Chat Admin#2
                </div>
            </div>
        </div>

    </div>
    <div class="footer container fixed-bottom w-50 " id="the_footer">
        <div class="d-flex justify-content-center">
            <div class="rounded-pill shadow"><img src="{% static 'img/jagoanhelm.png'%}" style="height:50px;weight:60px" alt=""></div>
            <h3 class="text-danger fw-bold my-1 mx-2"> jagoanhelm.com</h3>
        </div>
    </div>
    
    <script>
        let csrfmiddlewaretokennya = $("input[name=csrfmiddlewaretoken]").val();
        let last_position=0;
        $(document).ready(function() {
            let infonya =[];
            let i=0;
            infonya.push("Segera Klaim Voucher Gratis Ongkirmu!");
            infonya.push("Happy Birthday ya! Ada yang spesial untukmu hari ini!");
            infonya.push("Ada aksesoris baru loh... segera chek ya kaka...");
            setInterval(function() {
                $("#info").text(infonya[i]);
                i++;
                if(i>3) {
                    i=0;
                }
            },5000);
            searchkeyword();
           
        });

        function cek_scroll() {
            if($(window).scrollTop()>last_position) {
                $("#the_header").slideUp("fast");
                $("#the_footer").slideDown("slow");
            } else {
                $("#the_header").slideDown("slow");
                $("#the_footer").slideUp("fast");
            }
            last_position=$(window).scrollTop();
        }
        

        function tampilsearch() {
            $(".search-box").slideDown("slow");
        }

        function hide_search() {
            $(".search-box").slideUp("slow");
            
        }

        function searchkeyword() {
            $("#keyword").text($("#search").val());

            $.ajax({
                type: "POST",
                url: '/api/set/search/',
                data: {
                    'csrfmiddlewaretoken':csrfmiddlewaretokennya,
                    'keyword':$("#search").val(),
                },
                success: function(data) {
                    $("#usual_search").empty();
                    data.keyword.forEach(function(info) {
                        htmlnya = "<a href='#' id='keyword_"+ info.keyword +"' class='search-frequent'>"+ info.keyword+"</a>";
                        $("#usual_search").append(htmlnya);
                        $("#keyword_" + info.keyword).click(function() {
                            $("#search").val(info.keyword);
                            tampilsearch();
                            searchkeyword();
                        });
                    });
                }
            });
        }

        function show_category() {
            $(".category-box").slideToggle("slow");
            $(".shoppingcart-box").slideUp();
            $(".wishlist-box").slideUp();
            $(".notification-box").slideUp();
            $(".account-box").slideUp();
        }

        function show_shoppingcart() {
            $(".shoppingcart-box").slideToggle("slow");
            $(".wishlist-box").slideUp();
            $(".notification-box").slideUp();
            $(".account-box").slideUp();
            $(".category-box").slideUp();
        }

        function hide_shoppingcart() {
            $(".shoppingcart-box").slideUp("slow");
        }

        function hide_category() {
            $(".category-box").slideUp("slow");
        }

        function show_wishlist() {
            $(".wishlist-box").slideToggle("slow");
            $(".category-box").slideUp();
            $(".shoppingcart-box").slideUp();
            $(".notification-box").slideUp();
            $(".account-box").slideUp();
        }

        function hide_wishlist() {
            $(".wishlist-box").slideUp("slow");
        }

        function show_notification() {
            $(".notification-box").slideToggle("slow");
            $(".category-box").slideUp();
            $(".shoppingcart-box").slideUp();
            $(".wishlist-box").slideUp();
            $(".account-box").slideUp();
        }

        function hide_notification() {
            $(".notification-box").slideUp("slow");
        }

    

        function show_account() {
            $(".account-box").slideToggle("slow");
            $(".category-box").slideUp();
            $(".shoppingcart-box").slideUp();
            $(".wishlist-box").slideUp();
            $(".notification-box").slideUp();
        }

        function hide_account() {
            $(".account-box").slideUp("slow");
        }

        function show_promo() {
            $("#modalpromo").modal("show");
        }

        function modal_kategori_show() {
            $("#the_kategori").empty();
            let hasil = "<div title='Tampilkan Semua Barang' class='box-isi-kategori' id='kat_semua'><img src='/static/img/all.jpeg' class='w-100 rounded' style='width:150px;height:150px'><div class='position-absolute d-flex justify-content-center  p-1 bg-secondary rounded fw-bold text-white' style='width:170px'>Semua Kategori</div></div>";
            $("#the_kategori").append(hasil);
            $("#kat_semua").click(function() {
                set_kategori_page('');
            });
            $.ajax({
                type: "POST",
                url: "/api/get/kategori/",
                data: {
                    'csrfmiddlewaretoken':csrfmiddlewaretokennya
                },
                success: function(data) {
                    data.forEach(function(mydata) {
                        hasil = "<div title='"+ mydata.barang_kategori +"'' class='box-isi-kategori' id='kat_" + mydata.barang_kategori +"'><img src='" + mydata.barang_kategori_gambar +"' class='w-100 rounded' style='width:150px;height:150px'><div class='position-absolute d-flex justify-content-center  p-1 bg-secondary rounded fw-bold text-white' style='width:170px'>" + mydata.barang_kategori+"</div></div>";
                        $("#the_kategori").append(hasil);
                        $("#kat_" + mydata.barang_kategori).click(function() {
                            set_kategori_page(mydata.barang_kategori);
                        });
                    });
                }
            });
            $("#modalkategori").modal("show");
        }

        function set_kategori_page(kategori) {
            window.location.href = "/?cat=" + kategori;
        }

    </script>
</body>

</html>